/*! tinyscrollbar - v2.1.6 - 2014-04-14
 * http://www.baijs.com/tinyscrollbar
 *
 * Copyright (c) 2014 Maarten Baijs <wieringen@gmail.com>;
 * Licensed under the MIT license */

;(function(e){typeof define=="function"&&define.amd?define(["jquery"],e):typeof exports=="object"?e(require("jquery")):e(jQuery)})(function(e){"use strict";function t(t,i){function s(){return h.update(),u(),t.mouseenter(function(){v.hasClass("scrollbar-show")||v.addClass("scrollbar-show")}).mouseleave(function(){v.removeClass("scrollbar-show")}),h}function o(){g.css(x,h.contentPosition/h.trackRatio),d.css(x,-h.contentPosition),v.css(S,h.trackSize),m.css(S,h.trackSize),g.css(S,h.thumbSize)}function u(){w?p[0].ontouchstart=function(e){1===e.touches.length&&(e.stopPropagation(),a(e.touches[0]))}:(g.bind("mousedown",a),m.bind("mousedown",l)),e(window).resize(function(){h.update("relative")}),h.options.wheel&&window.addEventListener?t[0].addEventListener(E,f,!1):h.options.wheel&&(t[0].onmousewheel=f)}function a(t){e("body").addClass("noSelect"),y=b?t.pageX:t.pageY,h.thumbPosition=parseInt(g.css(x),10)||0,w?(document.ontouchmove=function(e){e.preventDefault(),l(e.touches[0])},document.ontouchend=c):(e(document).bind("mousemove",l),e(document).bind("mouseup",c),g.bind("mouseup",c))}function f(n){if(h.contentRatio<1){var r=n||window.event,i="delta"+h.options.axis.toUpperCase(),s=-(r[i]||r.detail||-1/3*r.wheelDelta)/40;h.contentPosition-=s*h.options.wheelSpeed,h.contentPosition=Math.min(h.contentSize-h.viewportSize,Math.max(0,h.contentPosition)),t.trigger("move"),g.css(x,h.contentPosition/h.trackRatio),d.css(x,-h.contentPosition);if(h.options.wheelLock||h.contentPosition!==h.contentSize-h.viewportSize&&h.contentPosition!==0)r=e.event.fix(r),r.preventDefault()}}function l(e){if(h.contentRatio<1){var n=b?e.pageX:e.pageY,r=n-y;h.options.scrollInvert&&w&&(r=y-n);var i=Math.min(h.trackSize-h.thumbSize,Math.max(0,h.thumbPosition+r));h.contentPosition=i*h.trackRatio,t.trigger("move"),g.css(x,i),d.css(x,-h.contentPosition)}}function c(){e("body").removeClass("noSelect"),e(document).unbind("mousemove",l),e(document).unbind("mouseup",c),g.unbind("mouseup",c),document.ontouchmove=document.ontouchend=null}this.options=e.extend({},r,i),this._defaults=r,this._name=n;var h=this,p=t.find(".viewport"),d=t.find(".overview"),v=t.find(".scrollbar"),m=v.find(".track"),g=v.find(".thumb"),y=0,b=this.options.axis==="x",w="ontouchstart"in document.documentElement,E="onwheel"in document||document.documentMode>=9?"wheel":document.onmousewheel!==undefined?"mousewheel":"DOMMouseScroll",S=b?"width":"height",x=b?"left":"top";return this.contentPosition=0,this.viewportSize=0,this.contentSize=0,this.contentRatio=0,this.trackSize=0,this.trackRatio=0,this.thumbSize=0,this.thumbPosition=0,this.update=function(e){var t=S.charAt(0).toUpperCase()+S.slice(1).toLowerCase();this.viewportSize=p[0]["offset"+t],this.contentSize=d[0]["scroll"+t],this.contentRatio=this.viewportSize/this.contentSize,this.trackSize=this.options.trackSize||this.viewportSize,this.thumbSize=Math.min(this.trackSize,Math.max(0,this.options.thumbSize||this.trackSize*this.contentRatio)),this.trackRatio=this.options.thumbSize?(this.contentSize-this.viewportSize)/(this.trackSize-this.thumbSize):this.contentSize/this.trackSize,v.toggleClass("disable",this.contentRatio>=1);switch(e){case"bottom":this.contentPosition=this.contentSize-this.viewportSize;break;case"relative":this.contentPosition=Math.min(this.contentSize-this.viewportSize,Math.max(0,this.contentPosition));break;default:this.contentPosition=parseInt(e,10)||0}return o(),h},s()}var n="tinyscrollbar",r={axis:"y",wheel:!0,wheelSpeed:40,wheelLock:!0,scrollInvert:!1,trackSize:!1,thumbSize:!1};e.fn[n]=function(r){return this.each(function(){e.data(this,"plugin_"+n)||e.data(this,"plugin_"+n,new t(e(this),r))})}})